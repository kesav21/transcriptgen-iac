
# Transcript Generator - Infrastructure as Code

The frontend is written in TypeScript, using the Angular framework, and is hosted on Azure App Services.
Our API layer is written in the same language and is hosted on Azure Functions.

Our API wraps certain functionality from Azure Media Services.
When the user navigates to our web app, the frontend connects with our custom API to query the user's jobs and displays this to the user.
The frontend requests the job data every time the user refreshes the page and displays the fresh results to the user.

Our API has a function that authenticates against Azure Storage and provides a token to the frontend.
When the user selects a file, the frontend connects to the Azure Storage API using that token to upload the given file to a storage account.
The URL to the file is then sent to our custom API, which forwards the request to Azure Media Services.
Media Services creates a job with the given file URL.
When the job completes, Media Services stores the output in a different storage account.

Our API includes a function to parse a transcript given in a TTML format to a JSON object that is more understandable to the frontend.
When the user views the transcript of a file, the frontend fetches the location of the video and the transcript, displays the video and forwards the transcript to our API, which parses it.
The frontend then displays the transcript.

We make use of Azure Media Services for video transcriptions and Azure Storage to host user-uploaded videos.
Currently, there are two storage accounts - one that hosts the videos uploaded by the user and one that hosts the output files generated by Azure Media Services.
The Media Services account and the storage account that it uses are not managed by Terraform but the rest of the infrastructure is.

